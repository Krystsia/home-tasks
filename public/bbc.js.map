{"version":3,"file":"bbc.js","sources":["webpack:///app/last-news/index.js","webpack:///app/actions/actions.js","webpack:///app/dispatcher/app_dispatcher.js","webpack:///app/dispatcher/dispatcher.js","webpack:///app/constants/constants.js","webpack:///app/stores/stores.js","webpack:///app/components/article-component/article_component.js","webpack:///app/components/more-new-component/more_news_component.js","webpack:///app/some.json"],"sourcesContent":["import { actions } from '../actions/actions.js';\n\nlet a = require('../some.json');\n\nconsole.log(a);\n\n((d) => {\n    actions.init();\n})(document);\n\n\n\n// WEBPACK FOOTER //\n// app/last-news/index.js","import Request from '../common/services/getData_service.js';\nimport appDispatcher from '../dispatcher/app_dispatcher.js';\nimport { store } from '../stores/stores.js';\nimport Article from '../components/article-component/article_component.js';\nimport MoreNews from '../components/more-new-component/more_news_component.js';\n\nclass Actions {\n  init() {\n    store.dispatcherIndex();\n    let articles = new Article();\n    let moreNews = new MoreNews();\n    articles.onInit();\n    moreNews.onInit();\n    const mainRequest = new Request('f1fdf072013c4b1e8b92b027a92a8977', 'GET', 'https://newsapi.org/v1/articles?source=bbc-news', {Accept: 'xyz'});\n    mainRequest.getData()\n      .then((data) => {\n          if (NODE_ENV == 'development') {\n              console.log(data);\n          }\n          appDispatcher.handleInitAction(data);\n      })\n  }\n  add() {\n    const mainRequest = new Request('f1fdf072013c4b1e8b92b027a92a8977', 'GET', 'https://newsapi.org/v1/articles?source=bbc-sport', {Accept: 'xyz'});\n    mainRequest.getData()\n      .then((data) => {\n          if (NODE_ENV == 'development') {\n              console.log(data);\n          }\n          appDispatcher.handleAddAction(data);\n    })\n  }\n\n  destroy() {}\n}\n\nexport let actions = new Actions();\n\n\n\n// WEBPACK FOOTER //\n// app/actions/actions.js","import Dispatcher from './dispatcher.js';\nimport { constants } from '../constants/constants.js'\n\nclass AppDispatcher extends Dispatcher{\n    handleViewAction(action) {\n        this.dispatch({\n            actionType: constants.VIEW_ACTION,\n            action: action\n        })\n    }\n\n    handleInitAction(data) {\n      console.log(data);\n        this.dispatch({\n            actionType: constants.INIT_ACTION,\n            data: data\n        })\n    }\n\n    handleAddAction(data) {\n      console.log(data);\n        this.dispatch({\n            actionType: constants.ADD_ACTION,\n            data: data\n        })\n    }\n}\n\nexport default new AppDispatcher;\n\n\n\n// WEBPACK FOOTER //\n// app/dispatcher/app_dispatcher.js","let _callbacks = [];\nlet _promises = [];\n\nexport default class Dispatcher {\n  register(callback) {\n      _callbacks.push(callback);\n      return _callbacks.length - 1;\n  }\n\n  dispatch(payload) {\n        const resolves = [];\n        const rejects = [];\n\n        _promises = _callbacks.map((item, index) => {\n            return new Promise((resolve, reject) => {\n                resolves[index] = resolve;\n                rejects[index] = reject;\n            });\n        });\n\n        _callbacks.forEach((callback, index) => {\n            Promise.resolve(callback(payload)).then(() => {\n              \n                resolves[index](payload);\n            }, () => {\n                rejects[index](new Error('Unsuccessful callback'));\n            });\n        });\n        _promises = [];\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// app/dispatcher/dispatcher.js","export const constants = {\n  INIT_ACTION: 1,\n  VIEW_ACTION: 2,\n  ADD_ACTION: 3\n}\n\n\n\n// WEBPACK FOOTER //\n// app/constants/constants.js","import appDispatcher from '../dispatcher/app_dispatcher.js';\nimport Request from '../common/services/getData_service.js';\nimport { constants } from '../constants/constants.js';\n\nlet dataStore = {};\nlet elementListener = [];\n\nclass Store {\n\n  get allData() {\n    return dataStore;\n  }\n\n  addElementListener(element) {\n    elementListener.push(element)\n  }\n\n  dispatcherIndex() {\n    appDispatcher.register((payload) => {\n      const actionType = payload.actionType;\n\n      switch (actionType) {\n        case constants.INIT_ACTION:\n            dataStore = payload.data;\n            let initEvent = new CustomEvent('init', {\n              bubbles: true\n            });\n\n            for(let element of elementListener) {\n\n              element.dispatchEvent(initEvent);\n            };\n            break;\n\n        case constants.ADD_ACTION:\n            dataStore = payload.data;\n            let addEvent = new CustomEvent('add', {\n              bubbles: true\n            });\n\n            for(let element of elementListener) {\n\n              element.dispatchEvent(addEvent);\n            };\n            break;\n\n        default:\n          return true;\n      }\n    });\n  }\n\n}\n\nexport let store = new Store();\n\n\n\n// WEBPACK FOOTER //\n// app/stores/stores.js","import { store } from '../../stores/stores.js';\nimport DateService from '../../common/services/getDate_service.js';\nimport ToggleDescription from '../../common/services/toggleDescription-service.js';\n\nexport default class Article {\n  onInit() {\n    let element = document.querySelector('.articles');\n    store.addElementListener(element);\n    element.addEventListener('init', () => {\n      repaint(element);\n    });\n    element.addEventListener('add', () => {\n      add(element);\n    });\n    initialEvents('mouseover', ToggleDescription.showDescription);\n  }\n}\n\nfunction constructArticles() {\n  let data = store.allData;\n\n  let { articles: allArticles = [] } = data;\n\n  let fragment = document.createDocumentFragment();\n\n  allArticles = allArticles.map((article) => {\n    let li = document.createElement('li');\n\n    li.innerHTML = `<a href=\"${article.url}\">\n                        <h2>${article.title}</h2>\n                        <p class=\"published-at\">${DateService.getDate(article.publishedAt)}</p>\n                        <img src=\"${article.urlToImage}\" alt=\"image\"/>\n                        <p class=\"descriptor\"><span>${article.description}</span><p>\n                    </a>`;\n    return li;\n  });\n\n  let tempArticleStore = [];\n\n  for(let li of allArticles) {\n      if(!tempArticleStore.some((item) => (item === li.innerHTML))) {\n          tempArticleStore.push(li.innerHTML);\n          fragment.appendChild(li);\n      }\n  }\n\n  return fragment;\n\n}\n\nfunction repaint(element) {\n  element.innerHTML = '';\n  element.appendChild(constructArticles());\n}\n\nfunction add(element) {\n  element.appendChild(constructArticles());\n}\n\nfunction initialEvents(evenName, callback) {\n    let articles = document.querySelector('.articles');\n    articles.addEventListener(evenName, callback);\n}\n\n\n\n// WEBPACK FOOTER //\n// app/components/article-component/article_component.js","import { store } from '../../stores/stores.js';\nimport { actions } from '../../actions/actions.js';\n\nexport default class MoreNews {\n  onInit() {\n    let element = document.querySelector('.add-more-container');\n    store.addElementListener(element);\n    element.addEventListener('init', () => {\n      repaint(element);\n    });\n  }\n}\n\nfunction construcAddMoreButton() {\n    let button = document.createElement('button');\n    button.classList.add('add-more');\n    button.innerText = 'Add More';\n    button.addEventListener('click', () => {\n      actions.add();\n    })\n    return button;\n}\n\nfunction repaint(element) {\n  element.appendChild(construcAddMoreButton());\n}\n\n\n\n// WEBPACK FOOTER //\n// app/components/more-new-component/more_news_component.js","module.exports = {\n\t\"description\": \"home works for frontcamp2\",\n\t\"main\": \"index.js\",\n\t\"scripts\": {\n\t\t\"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n\t\t\"build\": \"babel ./js --watch --out-dir ./js-compiled\",\n\t\t\"run\": \"webpack --display-error-details\",\n\t\t\"undefined\": 2\n\t},\n\t\"repository\": {\n\t\t\"type\": \"git\",\n\t\t\"url\": \"git+https://krystsia@github.com/Krystsia/home-tasks.git\",\n\t\t\"undefined\": 2\n\t},\n\t\"author\": \"Kiryl Krystsia\",\n\t\"license\": \"ISC\",\n\t\"bugs\": {\n\t\t\"url\": \"https://github.com/Krystsia/home-tasks/issues\",\n\t\t\"undefined\": 2\n\t},\n\t\"homepage\": \"https://github.com/Krystsia/home-tasks#readme\",\n\t\"devDependencies\": {\n\t\t\"babel-plugin-transform-es2015-modules-commonjs\": \"^6.18.0\",\n\t\t\"babel-polyfill\": \"^6.16.0\",\n\t\t\"babel-preset-es2015\": \"^6.18.0\",\n\t\t\"babel-preset-es2015-ie\": \"6.6.2\",\n\t\t\"babel-preset-stage-1\": \"^6.16.0\",\n\t\t\"babel-preset-stage-2\": \"^6.18.0\",\n\t\t\"compass-mixins\": \"^0.12.10\",\n\t\t\"css-loader\": \"^0.26.0\",\n\t\t\"extract-text-webpack-plugin\": \"^1.0.1\",\n\t\t\"json-loader\": \"^0.5.4\",\n\t\t\"node-sass\": \"^3.13.0\",\n\t\t\"postcss-loader\": \"^1.1.1\",\n\t\t\"sass-loader\": \"^4.0.2\",\n\t\t\"style-loader\": \"^0.13.1\",\n\t\t\"susy\": \"^2.2.12\",\n\t\t\"webpack\": \"^1.13.3\",\n\t\t\"webpack-dev-server\": \"^1.16.2\",\n\t\t\"whatwg-fetch\": \"^2.0.1\",\n\t\t\"undefined\": 5\n\t},\n\t\"dependencies\": {\n\t\t\"whatwg-fetch\": \"^2.0.1\",\n\t\t\"undefined\": 5\n\t},\n\t\"undefined\": 5\n};\n\n\n// WEBPACK FOOTER //\n// app/some.json"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACPA;AACA;;;AAAA;AACA;;;AAAA;AACA;AAAA;AACA;;;AAAA;AACA;;;;;;;AACA;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAEA;;;;;;;;;;;;;;;;ACpCA;AACA;;;AAAA;AACA;;;;;;;;;;;AACA;;;;;;;;;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;;;;AAEA;;;;;;;;;;;;;;AC5BA;AACA;AACA;AACA;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AA3BA;;;;;;;;;;;ACHA;AACA;AACA;AACA;AAHA;;;;;;;;;;;;;;;ACAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;;;AACA;AACA;AACA;AACA;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAHA;AAAA;AAAA;AACA;AADA;AAMA;AAAA;AACA;AACA;AAAA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAHA;AAAA;AAAA;AACA;AADA;AAMA;AAAA;AACA;AACA;AAAA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAQA;AACA;AACA;AACA;AACA;AA1BA;AA4BA;AACA;AACA;;;AA1CA;AACA;AACA;;;;;;AA2CA;;;;;;;;;;;;ACtDA;AACA;AAAA;AACA;;;AAAA;AACA;;;;;;;AACA;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAZA;AACA;AACA;AAYA;AACA;AACA;AAFA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AACA;AACA;AApBA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAqBA;AAAA;AAAA;AACA;AACA;AACA;AAzBA;AACA;AAoBA;AAAA;AAKA;AA1BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AA2BA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC7DA;AACA;AAAA;AACA;;;AACA;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AARA;AACA;AACA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;AAqBA;AACA;AACA;AAFA;AAIA;AA9CA;;;","sourceRoot":""}